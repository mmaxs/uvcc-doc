<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uvcc: Destroy callbacks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="Doxystyle-1.8.13.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uvcc
   </div>
   <div id="projectbrief">libuv C++ bindings</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('doxy_page__destroy_cb.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Destroy callbacks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following libuv types provide a field which is a pointer to the user-defined arbitrary data that can be associated with the libuv object:</p><ul>
<li><a href="http://docs.libuv.org/en/v1.x/handle.html#c.uv_handle_t.data"><code>uv_handle_t.data</code></a>,</li>
<li><a href="http://docs.libuv.org/en/v1.x/request.html#c.uv_req_t.data"><code>uv_req_t.data</code></a>,</li>
<li><a href="http://docs.libuv.org/en/v1.x/loop.html#c.uv_loop_t.data"><code>uv_loop_t.data</code></a>.</li>
</ul>
<p>Each of the uvcc classes representing these libuv types provides a destroy callback that is called when the reference count for the object instance becomes zero:</p><ul>
<li><code><a class="el" href="classuv_1_1handle.html#ade2f9dde63ad73fc041686077e57487d" title="The function type of the callback called when the handle has been closed and about to be destroyed...">uv::handle::on_destroy_t</a></code></li>
<li><code><a class="el" href="classuv_1_1request.html#a13ce9e2cbd88f1089277ab018cb37315" title="The function type of the callback called when the request object is about to be destroyed. ">uv::request::on_destroy_t</a></code></li>
<li><code><a class="el" href="classuv_1_1loop.html#a996304a961a9b2c51c2bc674052b53a1" title="The function type of the callback called when the loop instance is about to be destroyed. ">uv::loop::on_destroy_t</a></code></li>
</ul>
<p>The callback is intended to give the option to manipulate the user-defined data associated with the object through the <code>.data</code> pointer before the last variable referencing this object has been destroyed.</p>
<p>For the <code><a class="el" href="classuv_1_1handle.html" title="The base class for the libuv handles. ">uv::handle</a></code> calss the destroy callback functionality was initially based on the underlying libuv API <a href="http://docs.libuv.org/en/v1.x/handle.html#c.uv_close_cb"><code>uv_close_cb</code></a> facilities. The handle close callback passed to <a href="http://docs.libuv.org/en/v1.x/handle.html#c.uv_close"><code>uv_close()</code></a> goes through the event loop and is called asynchronously after the <code>uv_close()</code> call. But it wouldn't be executed if the loop with which the handle to be closed is associated is not running e.g. because of the loop has exited after processing all active handles and requests, and the program has come to the end (in this case the special care should be taken for proper closing of the libuv loop so all the pending callbacks to be performed). Instead, uvcc's destroy callback is called in any case when the last variable referencing this handle is destroyed. Whether the loop is running or not, the destroy callback will be executed synchronously as integrated part of the handle instance closing procedure.</p>
<p>For the other two classes (<code><a class="el" href="classuv_1_1request.html" title="The base class for the libuv requests. ">uv::request</a></code> and <code><a class="el" href="classuv_1_1loop.html" title="The I/O event loop class. ">uv::loop</a></code>) the destroy callbacks are a uvcc specific feature and they are executed as integrated part of the variable's destructor. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
